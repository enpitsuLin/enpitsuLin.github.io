<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="大道至简,知易行难"><title>Window下配置你的shell | enpitsuLin's blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.0.2"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Window下配置你的shell</h1><a id="logo" href="/.">enpitsuLin's blog</a><p class="description">铅笔de博客</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/comments/"><i class="fa fa-comment"> 评论</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Window下配置你的shell</h1><div class="post-meta">2019-03-28</div><a class="disqus-comment-count" href="/2019/03/28/config-powershell/#vcomment"><span class="valine-comment-count" data-xid="/2019/03/28/config-powershell/"></span><span> 条评论</span></a><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%8D%A2-PowerShell-%E7%9A%84%E9%85%8D%E8%89%B2"><span class="toc-number">1.</span> <span class="toc-text">更换 PowerShell 的配色</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%94%B9%E8%BF%9B-PowerShell-%E7%9A%84%E5%AD%97%E4%BD%93"><span class="toc-number">2.</span> <span class="toc-text">改进 PowerShell 的字体</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E5%88%B6-PowerShell-%E4%B8%AD%E7%9A%84-Prompt-%E5%8D%95%E5%85%83"><span class="toc-number">3.</span> <span class="toc-text">定制 PowerShell 中的 Prompt 单元</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-oh-my-posh"><span class="toc-number">3.1.</span> <span class="toc-text">安装 oh-my-posh</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-oh-my-posh"><span class="toc-number">3.2.</span> <span class="toc-text">配置 oh-my-posh</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E7%BB%88%E7%AB%AF%E4%B8%8E-Powershell-%E5%8D%8F%E5%90%8C%E5%B7%A5%E4%BD%9C"><span class="toc-number">4.</span> <span class="toc-text">使用第三方终端与 Powershell 协同工作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E8%B4%B4%E8%BF%91win10%E9%A3%8E%E6%A0%BC%E7%9A%84%E7%AC%AC%E4%B8%89%E6%96%B9%E7%BB%88%E7%AB%AF"><span class="toc-number">4.1.</span> <span class="toc-text">更贴近win10风格的第三方终端</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Fluent-Terminal"><span class="toc-number">4.1.1.</span> <span class="toc-text">Fluent Terminal</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Hyper"><span class="toc-number">4.1.2.</span> <span class="toc-text">Hyper</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Terminus"><span class="toc-number">4.1.3.</span> <span class="toc-text">Terminus</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ConEmu"><span class="toc-number">4.2.</span> <span class="toc-text">ConEmu</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8WSL-zsh"><span class="toc-number">5.</span> <span class="toc-text">使用WSL + zsh</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E6%9D%9F"><span class="toc-number">6.</span> <span class="toc-text">结束</span></a></li></ol></div></div><div class="post-content"><p><strong>终端</strong>，是用户与操作系统进行交互的最原始的输入输出环境，也是一些高级系统操作必要工具。<br>经常调试脚本，使用git频率多，于是今天决定配一个好用的shell来当做学习环境。</p>
<a id="more"></a>

<p>下面就开始调教window10自带的其实十分强大<del>但是有点丑</del>的 <strong>powershell</strong></p>
<h2 id="更换-PowerShell-的配色"><a href="#更换-PowerShell-的配色" class="headerlink" title="更换 PowerShell 的配色"></a>更换 PowerShell 的配色</h2><p>微软官方提供了一个更换 PowerShell 配色的小工具：ColorTool.exe，我们可以利用它来更换 PowerShell 的主题颜色。</p>
<p>我们可以从 ColorTool 的 <a target="_blank" rel="noopener" href="https://github.com/Microsoft/console/releases">GitHub 页面</a> 下载这个小工具。当然，如果你使用 Scoop 或者 Chocolatey，也可以这样安装：</p>
<p>Scoop</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop install colortool</span><br></pre></td></tr></table></figure>
<p>Chocolatey</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">choco install colortool</span><br></pre></td></tr></table></figure>
<p>这里我更加推荐利用 <strong>Scoop</strong> 这个优质的包管理来安装 ColorTool。</p>
<hr>
<p>ColorTool 使用非常简单。我们可以利用下面这个命令进行查看工具自带的几个主题：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 注：-s 代表 schemes</span></span><br><span class="line">colortool -s</span><br></pre></td></tr></table></figure>
<img src="/2019/03/28/config-powershell/%E5%87%A0%E4%B8%AA%E8%87%AA%E5%B8%A6%E9%85%8D%E8%89%B2%E4%B8%BB%E9%A2%98.png" class="" title="[几个自带配色主题]">

<p>前面的几个 .ini 和 .itermcolors就是主题配置文件，我们可以直接通过下面这个命令设置主题：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 临时查看</span></span><br><span class="line">colortool &lt;主题名称&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 定义默认值</span></span><br><span class="line">colortool -d &lt;主题名称&gt;</span><br></pre></td></tr></table></figure>
<p>比如我们希望将主题配色更换为<br>OneHalfDark.itermcolors，只需要输入下面这个命令就可以更换并预览更新：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">colortool OneHalfDark</span><br></pre></td></tr></table></figure>

<blockquote>
<p>由于 ColorTool 直接支持 iTerm 主题配置文件，因此我们可以在 iterm2colorschemes 这个网站找到我们想要的主题背景进行配置，方法和上面介绍的一样：在 PowerShell 中定位至你希望更换的主题文件，使用命令 <code>colortool &lt;主题名称&gt;.itermcolors</code> 进行配置即可。同时，如果你对上面的主题都不满意，你也可以直接在这个网站： terminal.sexy 自行配置自己想要的主题，并通过同样的方式进行应用。</p>
</blockquote>
<h2 id="改进-PowerShell-的字体"><a href="#改进-PowerShell-的字体" class="headerlink" title="改进 PowerShell 的字体"></a>改进 PowerShell 的字体</h2><p>对于大多数人来说默认 PowerShell 的<code>新宋体</code>真的是十分的丑。<br>由于微软对控制台字体的元数据有限制：</p>
<blockquote>
<p>这些字体必须满足以下条件，可在命令会话窗口中：<br>　该字体必须是等宽字体。<br>　该字体不能为斜体字体。<br>　该字体不能有A或C负空间。<br>　如果是 TrueType 字体，则它必须是 FF_MODERN。<br>　如果它不是 TrueType 字体，则它必须是 OEM_CHARSET。<br>对于亚洲字体的附加条件：<br>　如果不是 TrueType 字体，字体名必须是“Terminal”。<br>　如果它是亚洲的 TrueType 字体，它还必须使用亚洲语言的字符集。</p>
</blockquote>
<p>可能大多数人喜欢使用适合于编程的等宽字体如 Consolas 作为Powershell的字体,但这里推荐一款<code>Sarasa Gothic / 更纱黑体 / 更紗黑體 / 更紗ゴシック</code>(更纱黑体)，可以从更纱黑体的 <a target="_blank" rel="noopener" href="https://github.com/be5invis/Sarasa-Gothic/releases">GitHub 页面</a>下载。</p>
<p>下载解压安装更纱黑体之后，我们重新启动一个 PowerShell 终端，就可以在菜单栏右键，选择<code>属性-字体</code>，并在字体中选择更纱黑体。适合终端使用的等宽字体是<code>等距更纱黑体 T SC</code>或<code>Sarasa Mono T SC</code>。</p>
<p>至此字体就从别扭的<code>新宋体</code>改到了<code>更纱黑体</code></p>
<h2 id="定制-PowerShell-中的-Prompt-单元"><a href="#定制-PowerShell-中的-Prompt-单元" class="headerlink" title="定制 PowerShell 中的 Prompt 单元"></a>定制 PowerShell 中的 Prompt 单元</h2><p>PowerShell 等 Shell 的一个基本的命令单元大致如下：</p>
<ul>
<li>前面的部分就是 Prompt，能够展示包括用户、系统、开发环境、版本控制等等有用的信息</li>
<li>后面的部分是具体的命令，也就是我们每次执行操作时输入命令的位置</li>
</ul>
<img src="/2019/03/28/config-powershell/Shell%E5%91%BD%E4%BB%A4%E7%BB%93%E6%9E%84.png" class="" title="Shell命令结构">

<h3 id="安装-oh-my-posh"><a href="#安装-oh-my-posh" class="headerlink" title="安装 oh-my-posh"></a>安装 oh-my-posh</h3><p>我们需要先以管理员权限启动 PowerShell，以便执行安装操作。（具体是在开始按钮上点击右键，选择“Windows PowerShell (管理员)”。</p>
<p>然后，运行命令以安装 posh-git，这是 oh-my-posh 的依赖。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Install-Module posh-git -Scope CurrentUser</span><br></pre></td></tr></table></figure>
<p>如果此前没有安装 NuGet 提供程序，则此时会提示安装 NuGet；如果此前没有开启执行任意脚本，此处也会提示执行脚本。如果没有权限执行脚本，可能需要先执行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-ExecutionPolicy Bypass</span><br></pre></td></tr></table></figure>
<p>接下来，运行命令以安装 oh-my-posh 本身。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Install-Module oh-my-posh  -Scope CurrentUser </span><br></pre></td></tr></table></figure>
<p>到这里oh-my-posh就安装完毕</p>
<hr>
<h3 id="配置-oh-my-posh"><a href="#配置-oh-my-posh" class="headerlink" title="配置 oh-my-posh"></a>配置 oh-my-posh</h3><p>接下来，我们需要对oh-my-posh进行配置<br>首先</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if (!(Test-Path -Path $PROFILE )) &#123; New-Item -Type File -Path $PROFILE -Force &#125;</span><br><span class="line">notepad $PROFILE</span><br></pre></td></tr></table></figure>
<p>然后再打开的记事本文档中添加下列内容</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Import</span>-<span class="keyword">Module</span> posh-git </span><br><span class="line"><span class="keyword">Import</span>-<span class="keyword">Module</span> oh-my-posh </span><br><span class="line"><span class="keyword">Set</span>-Theme Agnoster</span><br></pre></td></tr></table></figure>
<p>如果一切顺利的话重启你的 Powershell 就会发现已经变得和本节开头的示意图一样了。</p>
<hr>
<p>PS：配置文件的最后一句<code>Set-Theme  Agnoster</code>的作用就是配置主题。我们可以在配置文件里面修改这个命令中的 Agnoster 即「主题名」来更换主题。更多的主题可以<a target="_blank" rel="noopener" href="https://github.com/JanDeDobbeleer/oh-my-posh#themes">oh-my-posh 的文档#主题</a>中查看。</p>
<h2 id="使用第三方终端与-Powershell-协同工作"><a href="#使用第三方终端与-Powershell-协同工作" class="headerlink" title="使用第三方终端与 Powershell 协同工作"></a>使用第三方终端与 Powershell 协同工作</h2><p>现在我所使用的和文章内截图所示的都是基于ConEmu+Powershell的效果<br><del>咕咕咕</del></p>
<h3 id="更贴近win10风格的第三方终端"><a href="#更贴近win10风格的第三方终端" class="headerlink" title="更贴近win10风格的第三方终端"></a>更贴近win10风格的第三方终端</h3><h4 id="Fluent-Terminal"><a href="#Fluent-Terminal" class="headerlink" title="Fluent Terminal"></a>Fluent Terminal</h4><p>试用一段时间弃，确实很华丽。</p>
<h4 id="Hyper"><a href="#Hyper" class="headerlink" title="Hyper"></a>Hyper</h4><p>未尝试</p>
<h4 id="Terminus"><a href="#Terminus" class="headerlink" title="Terminus"></a>Terminus</h4><p>未尝试</p>
<h3 id="ConEmu"><a href="#ConEmu" class="headerlink" title="ConEmu"></a>ConEmu</h3><h2 id="使用WSL-zsh"><a href="#使用WSL-zsh" class="headerlink" title="使用WSL + zsh"></a>使用WSL + zsh</h2><p>这方面我也不是很懂.jpg 留个位置以后有机会试试</p>
<h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2><p>至此对win10的默认终端 Powershell 调教完成。然后享受吧。</p>
</div><div class="tags"><a href="/tags/shell/"><i class="fa fa-tag"></i>shell</a><a href="/tags/winodws/"><i class="fa fa-tag"></i>winodws</a></div><div class="post-nav"><a class="pre" href="/2020/03/27/migration-to-gitee/">博客迁移到gitee</a><a class="next" href="/2019/03/27/add-live2d-model/">新增一个live2d插件</a></div><div id="vcomment"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify = 'false' == 'true' ? true : false;
var verify = 'false' == 'true' ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'rztpMWilPKhkMCsWe8SqRMBy-gzGzoHsz',
  appKey:'HO18QPKHqalUIGkNTbrz6iHY',
  placeholder:'Just so so',
  avatar:'mm',
  guest_info:guest_info,
  pageSize:'10'
})
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/live2d/" style="font-size: 15px;">live2d</a> <a href="/tags/%E9%80%86%E5%90%91/" style="font-size: 15px;">逆向</a> <a href="/tags/%E5%AE%89%E5%8D%93/" style="font-size: 15px;">安卓</a> <a href="/tags/GUI/" style="font-size: 15px;">GUI</a> <a href="/tags/Node/" style="font-size: 15px;">Node</a> <a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/winodws/" style="font-size: 15px;">winodws</a> <a href="/tags/blog/" style="font-size: 15px;">blog</a> <a href="/tags/git/" style="font-size: 15px;">git</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/08/20/configuration-webpack-for-vue-js/">从0搭建自己基于webpack的vue-cli</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/08/14/node-sass-install-fail/">node-sass 安装失败解决方案</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/07/25/event-driven-model/">理解Node.js的事件驱动模型</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/04/03/cocos2d-decrypt/">cocos2d手游逆向——XXTEA加密</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/27/migration-to-gitee/">博客迁移到gitee</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/28/config-powershell/">Window下配置你的shell</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/27/add-live2d-model/">新增一个live2d插件</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/03/26/hello-world/">Hello World</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">enpitsuLin's blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/css/search.css?v=0.0.0"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/copycode.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"width":120,"height":240,"position":"left","hOffset":0,"vOffset":-60},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>